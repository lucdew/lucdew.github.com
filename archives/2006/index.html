<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Archives: 2006 | Luc Dewavrin&#39;s weblog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <link rel="alternative" href="/atom.xml" title="Luc Dewavrin&#39;s weblog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-1239956-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luc Dewavrin&#39;s weblog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-github-link" class="nav-icon" href="https://github.com/lucdew" target="_blank"></a>
        <a id="nav-twitter-link" class="nav-icon" href="https://twitter.com/lucdew" target="_blank"></a>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://www.dewavrin.info"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-gwt-client-with-rails-backend-integration-tip-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/gwt-client-with-rails-backend-integration-tip-2/" class="article-date">
  <time datetime="2006-12-17T23:00:00.000Z" itemprop="datePublished">Dec 18 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/gwt-client-with-rails-backend-integration-tip-2/">Gwt client with rails backend integration tip</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><br>Writing a rich web interface in Java and server side code in ruby : pretty unsual isn’it ? But hey after all, web client interfaces get everyday more complex and are mix of technologies. Gwt sounds interesting since you write your complex web UI components like you’d write a Swing widget, mostly in Java.<br>Then, unlike echo2  you can compile your Gwt code to Javascript and Html and deploy it in any Web server.So, if you would like to invoke a rails service with a Gwt client and getsa Json response here are the steps to achieve this kind of stuff.<br></p>

<p>1) Create a Gwt JSNI class to invoke your rails service.</p>
<p>Update 12/17/06: Since GWT 1.2.2, you can achieve this without writing your own JSNI class, by using the GWT <a href="http://code.google.com/webtoolkit/documentation/com.google.gwt.http.client.RequestBuilder.html" target="_blank" rel="external">RequestBuilder</a> class which provides a method to set your own http header.<a href="http://code.google.com/webtoolkit/documentation/com.google.gwt.doc.DeveloperGuide.JavaScriptNativeInterface.html" target="_blank" rel="external">Java Script Native Interface </a> is Google Web Toolkit equivalent of JNI but for Javascript. Java objects (which are BTW translated to Javascript code by GWT compiler) can interact with Javascript objects (and reversly).Rails <strong>respond_to</strong> method available in each controller can be used to respond to yourclient and deliver a different response for each mime type asked.Rails uses <strong>Accept HTTP header</strong> to differentiate the asked media type response.So the class <a href="http://www.dewavrin.info/code/HTTPJsonRequest.java" target="_blank" rel="external">Java source file (broken link…)</a> has static GET and POST methods which perform HTTP requests and especially set the accept HTTP header to ‘text/json’ .<br>(I grabbed this code from the GWT mailing list and modified it a little bit).Then declare it in your GWT module.</p>
<figure class="highlight xml"><pre><div class="line"><span class="tag">&lt;<span class="title">inherits</span> <span class="attribute">name</span>=<span class="value">"biz.dewavrin.net.HTTPJsonRequest"</span> /&gt;</span></div></pre></figure>

<p>2) Enable rails to perform Json responses.Everything is explained <a href="http://superfluo.org/blojsom/blog/pic/devel/2006/06/21/How-to-register-a-new-MIME-type-in-Rails.html" target="_blank" rel="external">on this blog entry.</a>N.B: importing the json module is “superfluous” ;-) since it’s packed with rails 1.1</p>
<p>3) Modify ROR active record base class to dump themselves as a Json data structure.</p>
<p>Add the following method (the code comes from rails wiki):</p>
<figure class="highlight ruby"><pre><div class="line"><span class="function"><span class="keyword">def</span> </span>to_json(*)</div><div class="line"> </div><div class="line">  result = <span class="constant">Hash</span>.new</div><div class="line">  <span class="keyword">self</span>.<span class="keyword">class</span>.content_columns.each <span class="keyword">do</span> |column|</div><div class="line">    result[column.name.to_sym] = <span class="keyword">self</span>.send(column.name)</div><div class="line">  <span class="keyword">end</span></div><div class="line">  result.to_json</div><div class="line"> </div><div class="line"><span class="keyword">end</span></div></pre></figure>

<p>4) In your rails controller, send a Json response when asked (note the call to the to_json method):</p>
<figure class="highlight ruby"><pre><div class="line"><span class="function"><span class="keyword">def</span> </span>list</div><div class="line">  <span class="variable">@songs</span> = <span class="constant">Song</span>.find(<span class="symbol">:all</span>)</div><div class="line">  respond_to <span class="keyword">do</span> |wants|</div><div class="line">    wants.json {</div><div class="line">       render <span class="symbol">:text</span> =&gt; <span class="variable">@songs</span>.to_json</div><div class="line">    }</div><div class="line">    wants.html {</div><div class="line">        <span class="variable">@song_pages</span>, <span class="variable">@songs</span> = paginate <span class="symbol">:song</span>, <span class="symbol">:per_page</span> =&amp;gt; <span class="number">10</span></div><div class="line">    }</div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></figure><br>and in your GWT client, the asynchronous HTTP request-response:<br><br><figure class="highlight java"><pre><div class="line">HTTPJsonRequest.asyncGet(<span class="string">"http://localhost:3000/library/list"</span>, <span class="keyword">new</span> ResponseTextHandler() {</div><div class="line">       <span class="keyword">try</span> { JSONValue jsonValue = JSONParser.parse(responseText); ... }</div><div class="line">       <span class="keyword">catch</span> (JSONException e) { <span class="comment">// do nothing } </span></div><div class="line">} );</div></pre></figure>

<p>Note that this solution is limited for the following reasons:</p>
<ul>
<li>It’s forbidden to do Java reflection in the GWT client. So you can’tinstantiate a JavaBean from a Json object in a generic way.I would have liked to add a type field in my Json data representationand have my Java code instantiate a bean.</li>
<li>Gwt client limits usage of J2SE 1.4.2 to collection’s API and some java.lang classes. See  <a href="http://code.google.com/webtoolkit/documentation/com.google.gwt.doc.DeveloperGuide.Fundamentals.JavaToJavaScriptCompiler.JavaRuntimeSupport.html" target="_blank" rel="external">runtime library support</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/gwt-client-with-rails-backend-integration-tip-2/" data-id="xwrrfflmyn4gx5oa" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/gwt-client-with-rails-backend-integration-tip-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gwt/">gwt</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rails/">rails</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-maven-quick-tip-adding-a-local-dependency" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/maven-quick-tip-adding-a-local-dependency/" class="article-date">
  <time datetime="2006-11-26T23:00:00.000Z" itemprop="datePublished">Nov 27 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/maven-quick-tip-adding-a-local-dependency/">Maven quick tip: adding a local dependency</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Well after almost 6 months of silence, here’s a maven quick tipif you need to add a dependency on a library without adding ityour local maven repository.Define the dependency scope as system and the path to your library:</p>
<figure class="highlight xml"><pre><div class="line"><span class="tag">&lt;<span class="title">dependency</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">groupid</span>&gt;</span>weblogic<span class="tag">&lt;/<span class="title">groupid</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">artifactid</span>&gt;</span>weblogic<span class="tag">&lt;/<span class="title">artifactid</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">version</span>&gt;</span>8.1.4<span class="tag">&lt;/<span class="title">version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">scope</span>&gt;</span>system<span class="tag">&lt;/<span class="title">scope</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">systempath</span>&gt;</span></div><div class="line">		${weblogic.home}/server/lib/weblogic.jar</div><div class="line">	<span class="tag">&lt;/<span class="title">systempath</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">dependency</span>&gt;</span></div></pre></figure>

<p>Then, either declare the weblogic.home property in your pom :</p>
<figure class="highlight xml"><pre><div class="line"><span class="tag">&lt;<span class="title">properties</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="title">weblogic.home</span>&gt;</span>c:/bea/weblogic81<span class="tag">&lt;/<span class="title">weblogic.home</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">properties</span>&gt;</span></div></pre></figure>

<p>or add it to your settings.xml file by adding it to a default profile:</p>
<figure class="highlight xml"><pre><div class="line"><span class="tag">&lt;<span class="title">profile</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="title">id</span>&gt;</span>dev<span class="tag">&lt;/<span class="title">id</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="title">properties</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="title">weblogic.home</span>&gt;</span>C:/bea/weblogic81<span class="tag">&lt;/<span class="title">weblogic.home</span>&gt;</span></div><div class="line">     <span class="tag">&lt;/<span class="title">properties</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">profile</span>&gt;</span></div><div class="line"> </div><div class="line"><span class="tag">&lt;<span class="title">activeprofiles</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="title">activeprofile</span>&gt;</span>dev<span class="tag">&lt;/<span class="title">activeprofile</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">activeprofiles</span>&gt;</span></div></pre></figure>

<p>I am not yet fully committed to maven but it really shines for kickstartingJ2EE projects with artifacts and easily downloadable dependencies libraries.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/maven-quick-tip-adding-a-local-dependency/" data-id="jbaf3qfigavahr8n" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/maven-quick-tip-adding-a-local-dependency/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2006-06-13-spring-and-lingo-easy-jms-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2006-06-13-spring-and-lingo-easy-jms-2/" class="article-date">
  <time datetime="2006-06-12T22:00:00.000Z" itemprop="datePublished">Jun 13 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2006-06-13-spring-and-lingo-easy-jms-2/">Spring and Lingo = Easy JMS</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>With <a href="http://lingo.codehaus.org/" target="_blank" rel="external">Lingo</a> from codeHaus, Spring remoting can be extended to support JMS.Here’s a great article on <a href="http://www.jroller.com/page/sjivan?entry=asynchronous_calls_and_callbacks_using" target="_blank" rel="external">Saniv Jivan’s blog</a> that shows some of its capabilities (synchronous calls over JMS and asynchronous callbacks).</p>
<p>One feature really seducing is asynchronous callbacks over JMSwith POJOS (without a single line of JMS code).The Lingo site does not provide much documentation on itso thanks for the author of this nice article.</p>
<p>We applied this technique for our build system to distribute loadon different machines to speed up the process (we only have mono processor build machines) and gets informed when tasks are done via callbacks.We used Spring 2.0M4 and ActiveMQ 3.2.2 in standalone mode.</p>
<p>Note that I had troubles to make it run with Websphere MQ 5.3First, recent MQ JMS 1.1 compliant Jars must be used anda misinterpretation of the JMS specs by Websphere seems to breakthe Lingo Spring JMS service exporter see<a href="http://opensource.atlassian.com/projects/spring/browse/SPR-1324" target="_blank" rel="external">http://opensource.atlassian.com/projects/spring/browse/SPR-1324</a>which is for JMS templates but can also be applied to lingo.</p>
<p>Here’s the diff of org.logicblaze.lingo.jms.JmsServiceExporter between unpatched and patched version for Websphere MQ:</p>
<figure class="highlight text"><pre><div class="line">diff -aur lingo-1.1/src/java/org/logicblaze/lingo/jms/JmsServiceExporter.java li</div><div class="line">ngo-1.1-patch/src/java/org/logicblaze/lingo/jms/JmsServiceExporter.java</div><div class="line">permalink: spring-and-lingo-easy-jms-2</div><div class="line"><span class="header">--- lingo-1.1/src/java/org/logicblaze/lingo/jms/JmsServiceExporter.java 2006-06-</span></div><div class="line">13 13:45:12.716722400 +0200</div><div class="line"><span class="header">+++ lingo-1.1-patch/src/java/org/logicblaze/lingo/jms/JmsServiceExporter.java200</span></div><div class="line">6-06-13 13:44:49.899847100 +0200</div><div class="line"><span class="chunk">@@ -180,7 +180,7 @@</span></div><div class="line"> </div><div class="line">}</div><div class="line">else {</div><div class="line"><span class="deletion">-            return session.createConsumer(destination, messageSelector, noLocal</span></div><div class="line">);</div><div class="line"><span class="addition">+            return session.createConsumer(destination, messageSelector);</span></div><div class="line">}</div><div class="line">}</div></pre></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/2006-06-13-spring-and-lingo-easy-jms-2/" data-id="epkch8gacewo6aux" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/2006-06-13-spring-and-lingo-easy-jms-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jms/">jms</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/lingo/">lingo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-use-your-voip-softphone-work-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/use-your-voip-softphone-work-2/" class="article-date">
  <time datetime="2006-05-24T22:00:00.000Z" itemprop="datePublished">May 25 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/general/">general</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/use-your-voip-softphone-work-2/">Use your VOIP softphone @work</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Some VOIP softphones like X-lite rely on <a href="http://en.wikipedia.org/wiki/SIP" target="_blank" rel="external">SIP</a> (connection) and <a href="http://en.wikipedia.org/wiki/Real-time_Transport_Protocol" target="_blank" rel="external">RTP</a> (voice) protocols which both work on top of UDP.</p>
<p>In previous posts (<a href="/blog/passing-through-corporate-firewall/">1</a> and <a href="/blog/passing-through-corporate-firewall-part2-2/">2</a>), I explained how to create a tunnel between a machine in a corporate networkand an external machine (like your home machine). The solution was based on SOCKS capabilities of a ssh tunnel which can behave like a Socks proxy server (-D optionof openssh).</p>
<p>With recent versions of openSSH, SOCKSv5 is even supported and therefore it becomespossible to tunnel UDP. Unfortunately, I haven’t found any Socksv5 compliant VOIP softphone.</p>
<p>To tunnel UDP over a TCP tunnel (a SSH tunnel) a combination of netcat and named pipescan be used (like explained <a href="http://zarb.org/~gc/html/udp-in-ssh-tunneling.html" target="_blank" rel="external">here</a>). The main disadvantage of this solution is that youhave to create a UDP to TCP pipe on one side of the tunnel and a TCP to UDP pipe on the other side for each remote port you have to access (5060 for SIPand 8000 for RTP by default).</p>
<p>Another solution is to create a VPN over your SSH tunnel.I chose <a href="http://vtun.sourceforge.net" target="_blank" rel="external">vtun</a> for its ease of you use but you could use other VPN over SSL solutions like openvpn.Note that there aren’t any Windows client for vtun. Openvpn can have Windows client and can create ethernet bridges (bridging the 2 virtual interfaces of your VPN tunnel.</p>
<p>Anyway with vtun you’ll be able to tunnel udp over a SSH tunnel. Beware that creating a VPN on top of a SSH tcp tunnel you expose your corporate network to attacks coming from your home network…I won’t detail here all the steps to create the solutions but only give an overviewof each step and refer to links:</p>
<ul>
<li>1) Configure your SSH daemon on your home machine. Use xinetd possiblyto forward connections on port 443 to port 22.</li>
<li><p>2) Use corkscrew and ssh to establish a tunnel between your workstation at workand your home machine through your office proxy and firewall (on local and remote port 5000 in the following example).</p>
<pre>ssh -F ~/.bin/config -g -N -L 5000:localhost:5000 foo@home</pre>
</li>
<li><p>2bis) If your corporate proxy requires NTLM authentication you can use <a href="http://sourceforge.net/projects/ntlmaps/" target="_blank" rel="external">NTLM maps</a> and connect corkscrew to the listen port of NTML maps.</p>
</li>
<li>3) Configure and run vtun server on your home machine (See <a href="http://www.linuxjournal.com/article/6675" target="_blank" rel="external">this</a>).</li>
<li>4) Also, configure and run vtun client on a Linux machine inside your corporate network.</li>
<li>5) Configure routes properly to access the SIP proxy through your VPN (<a href="http://www.asterisk.org/" target="_blank" rel="external">asterisk server</a> at homeor Internet SIP server).</li>
<li>6) Just configure your SIP phone as if you had direct access to the server (if you don’t nat).<img src="/images/custom/xlite.JPG" alt=""></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/use-your-voip-softphone-work-2/" data-id="ro17jrhatvhisttu" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/use-your-voip-softphone-work-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/asterisk/">asterisk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firewall/">firewall</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/security/">security</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/voip/">voip</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vpn/">vpn</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-maven-spring-20-pom-in-repositories-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/maven-spring-20-pom-in-repositories-2/" class="article-date">
  <time datetime="2006-04-26T22:00:00.000Z" itemprop="datePublished">Apr 27 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/maven-spring-20-pom-in-repositories-2/">Maven Spring 2.0 POM in repositories</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>At last !</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/maven-spring-20-pom-in-repositories-2/" data-id="012hn5mbeliu1kxi" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/maven-spring-20-pom-in-repositories-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven/">maven</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-spring-aop-and-mvc-authorization-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/spring-aop-and-mvc-authorization-2/" class="article-date">
  <time datetime="2006-04-20T22:00:00.000Z" itemprop="datePublished">Apr 21 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/spring-aop-and-mvc-authorization-2/">Spring AOP and MVC authorization</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>With Spring and a bunch of AOP I’ll show how it’s easy to add protectionsof your business components and notify the view that the user is not authorizedto perform a specific action.This example relies on Spring 2.0 and Spring MVC for the presentation layer.Let’s take an example of a service that executes jobs whose class is named JobExecutorService.This service has methods to add jobs in a Job queue, remove a job from the queueor stop a running job. We would like to authorize only owners of a job to remove the job or stop it. The jobs are persistent (to recover from failure).</p>
<p><u>1) Defining the authorization aspect</u><br>Let’s define in Spring’s application context a Job authorization advice and inject it a Job DAO to access persistent jobs.</p>
<figure class="highlight xml"><pre><div class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"jobAuthorizationAspect"</span> <span class="attribute">class</span>=<span class="value">"security.JobAuthorizationAspect"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"jobDAO"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">ref</span> <span class="attribute">bean</span>=<span class="value">"jobDAO"</span> /&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="title">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">bean</span>&gt;</span></div></pre></figure><br>Here’s below the simplified code of the bean advice which is just a POJOwhich benefits from injection.When the user doesn’t own the Job an AuthorizationException is thrown.We’ll see later how to deal with the exception.<br><figure class="highlight java"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JobAuthorizationAspect</span> </span>{</div><div class="line"> </div><div class="line">JobDAO jobDAO;</div><div class="line"><span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">final</span> Log LOG =LogFactory.getLog(JobAuthorizationAspect.class);</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setJobDAO</span>(JobDAO jobDAO) {</div><div class="line"><span class="keyword">this</span>.jobDAO= jobDAO;</div><div class="line">}</div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">checkForAuthorization</span>(Job job) {</div><div class="line"><span class="keyword">boolean</span> authorized = <span class="keyword">false</span>;</div><div class="line"> </div><div class="line">UserContext userCtx = ContextMgr.getUserContext();</div><div class="line"> </div><div class="line"><span class="keyword">if</span> (<span class="keyword">null</span> != userCtx) {</div><div class="line">Job job = jobDAO.getJobById(job.getId());</div><div class="line"><span class="comment">// If user launched Job, he's allowed to perform operations on it</span></div><div class="line"><span class="keyword">if</span> ((job.getState() == Job.STATE.RUNNING || job.getState() == Job.STATE.STOPPED || job.getState() == job.getState().ENDED) &amp;&amp; job.getOwner().equals(userCtx.getPrincipal().getName())) authorized =<span class="keyword">true</span>;</div><div class="line">}</div><div class="line">}</div><div class="line"><span class="keyword">else</span> {</div><div class="line">LOG.warn(<span class="string">"user context or job context have not been found"</span>);</div><div class="line">}</div><div class="line"><span class="keyword">if</span> (! authorized ) {</div><div class="line">LOG.warn(<span class="string">"user not authorized"</span>);</div><div class="line"><span class="keyword">throw</span> <span class="keyword">new</span> AuthorizationException(<span class="string">"jobaction.notauthorized"</span>,<span class="keyword">new</span> Object[]{},<span class="string">"this action is not allowed"</span>);</div><div class="line">}</div><div class="line">}</div></pre></figure><br><u>N.B</u><br>I used Spring to bind user’s context (which stores user information) to the current Thread via a ThreadLocal to easily retrieve user’s data stored in memory and avoid being tied to the Servlet API. ContextMgr classhas a static method to retrieve user’s context.Actually binding is done with a Spring MVC interceptor on controllers in the Spring Web Application Context(you could also use a Servlet filter):<br><figure class="highlight xml"><pre><div class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"authurlMapping"</span></span></div><div class="line"><span class="attribute">class</span>=<span class="value">"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"</span>&gt;</div><div class="line">   <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"mappings"</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="title">props</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="title">prop</span> <span class="attribute">key</span>=<span class="value">"/jobs.htm"</span>&gt;</span>JobMultiActionController<span class="tag">&lt;/<span class="title">prop</span>&gt;</span></div><div class="line">         <span class="comment">&lt;!-- Add additional URL mappings here --&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="title">props</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="title">property</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"interceptors"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="title">list</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="title">ref</span> <span class="attribute">bean</span>=<span class="value">"ContextInterceptor"</span>/&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="title">list</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="title">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">bean</span>&gt;</span></div></pre></figure>

<p>The ContextInterceptor bean just retrieves user’s data from the HTTP session<br>and binds it to the current thread</p>
<p><u>2) Declaring the poincuts</u></p>
<p>Then we add pointcuts to execute the aspect. Here the pointcuts are defined with AspectJ expressions</p>
<figure class="highlight xml"><pre><div class="line"><span class="tag">&lt;<span class="title">aop:config</span> <span class="attribute">proxyTargetClass</span>=<span class="value">"true"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">aop:aspect</span> <span class="attribute">id</span>=<span class="value">"beforeAdviceJobAuth"</span> <span class="attribute">ref</span>=<span class="value">"jobAuthorizationAspect"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">aop:advice</span></span></div><div class="line">kind="before"</div><div class="line">method="checkForAuthorization" <span class="attribute">arg-names</span>=<span class="value">"job"</span></div><div class="line"><span class="attribute">pointcut</span>=<span class="value">"(execution(* jobqueue.JobExecutorService.stopJob(..)) and args (job)) || ( execution(* jobqueue.JobExecutorService.removeJob(..)) and args(job)) "</span>/&gt;</div><div class="line"><span class="tag">&lt;/<span class="title">aop:aspect</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">aop:config</span>&gt;</span></div></pre></figure>


<p>So here we are weaving our jobAuthorizationAspect advice with the JobExecutorService bean (not detailed here).The proxyTargetClass attribute is here because the JobExecutorService is declared elsewehere in Spring’s applicationContext and injected and used directly in Spring MVC controllers not via its interfaces. But the bean’s class implements multiple interfaces (infrastructure interfaces like Observer )Spring’s default behaviour is when it detects that the class implements interfaces it to use Java dynamic proxies. So here we set this attribute to force CGLib proxying.The arg-names attribute is here to be as explicit as possible and make sure that our “before” advice is executed for the proper methods of JobExecutorService and that the Job argument is passed (by reference) to the “checkForAuthorization” method of our advice.</p>
<p><u>3) Dealing with the AuthorizationException</u></p>
<p>Spring has a mechanism that allows to intercept exceptions and deal with them.We could catch the error and redirects to a page displaying a generic authorization message,we’ll choose to extend this concept to return to the submitting view to display the message.Here’s the declaration of the AuthorizedExceptionResolver</p>
<figure class="highlight xml"><pre><div class="line"><span class="tag">&lt;<span class="title">bean</span> <span class="attribute">id</span>=<span class="value">"AuthorizedExceptionResolver"</span> <span class="attribute">class</span>=<span class="value">"web.AuthorizedExceptionResolver"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">property</span> <span class="attribute">name</span>=<span class="value">"order"</span>&gt;</span><span class="tag">&lt;<span class="title">value</span>&gt;</span>1<span class="tag">&lt;/<span class="title">value</span>&gt;</span><span class="tag">&lt;/<span class="title">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">bean</span>&gt;</span></div></pre></figure>

<p>And a simplified version of the code (we’ll suppose that all our controllersare SimpleFormController ). :</p>
<p><figure class="highlight java"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RecoverableExceptionResolver</span> <span class="keyword">implements</span> <span class="title">HandlerExceptionResolver</span>,<span class="title">Ordered</span>,<span class="title">ApplicationContextAware</span> </span>{</div><div class="line"> </div><div class="line"><span class="keyword">private</span> <span class="keyword">int</span> order;</div><div class="line"> </div><div class="line"><span class="keyword">public</span> ModelAndView <span class="title">resolveException</span>(HttpServletRequest request,HttpServletResponse response,Object handler,Exception e) {</div><div class="line"> </div><div class="line"><span class="keyword">if</span> (e <span class="keyword">instanceof</span> RecoverableException ) {</div><div class="line"> </div><div class="line">Map&lt;Object,Object&gt; messages = <span class="keyword">new</span> HashMap&lt;Object,Object&gt;();</div><div class="line"><span class="keyword">if</span> (handler != <span class="keyword">null</span> &amp;&amp; handler <span class="keyword">instanceof</span> AbstractController ) {</div><div class="line">   AbstractController controller = (AbstractController)handler;</div><div class="line">   messages.put(<span class="string">"errormessage"</span>,controller.getApplicationContext().getMessage(((AuthorizedException)e).getMessageKey(),<span class="string">"not authorized"</span>,((AuthorizedException)e).getMessage(),request.getLocale()));</div><div class="line">request.setAttribute(<span class="string">"messages"</span>,messages);</div><div class="line">}</div><div class="line"> </div><div class="line"><span class="comment">// If SimpleFormController return internally to its view</span></div><div class="line"><span class="keyword">if</span> (<span class="keyword">null</span> != handler &amp;&amp; handler <span class="keyword">instanceof</span> SimpleFormController) {</div><div class="line"><span class="keyword">return</span> <span class="keyword">new</span> ModelAndView(controller.getFormView());</div><div class="line">}</div><div class="line">}</div><div class="line"> </div><div class="line"><span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">}</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOrder</span>() {</div><div class="line"><span class="keyword">return</span> order;</div><div class="line">}</div><div class="line"> </div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOrder</span>(<span class="keyword">int</span> order) {</div><div class="line"><span class="keyword">this</span>.order = order;</div><div class="line">}</div><div class="line"> </div><div class="line">}</div></pre></figure><br>Here I made the assumption that the command (object that maps the HTTP submitted parameters)has been bound to user’s session in the controller (Spring has mechanism to do this)and that the form’s view first check that if the form’s command is in the user’s sessionit uses it to populate the form’s fields.We’ll also suppose that the controller’s form view has a box that displays messages whenfound in the request context under the messages attribute (like flash boxes of ROR).</p>
<p><u>Conclusion:</u><br>AOP is the perfect tool to protect business components in a non-intrusive way.Thanks to Spring MVC framework techniques we can create a very flexible and genericway to handle authorizations and report authorization exceptions in our web layer. (using many of the Java EE cool buzz technos)</p>
<p><em>N.B:</em> Sorry for my poor English…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/spring-aop-and-mvc-authorization-2/" data-id="jm97wtwx7mk3i3a6" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/spring-aop-and-mvc-authorization-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aop/">aop</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aspectj/">aspectj</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/spring/">spring</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java-on-freebsd-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/java-on-freebsd-2/" class="article-date">
  <time datetime="2006-04-05T22:00:00.000Z" itemprop="datePublished">Apr 6 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/java-on-freebsd-2/">Java on FreeBSD</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Hey, great ! Sun and FreeBSD agreed on Java distribution and now J2SDK can get distributed with FreeBSD. No more get linux-compat <span>=&gt; get a JDK =&gt; get Java sources =&gt;</span> Compile and package to run Java “natively” on FreeBSD (without Linux compatibility ).</p>
<p>It took at least 6 hours on my slow home gateway. Also it seems to run much faster, see the results of my very serious test (2nd invokation of java -version)</p>
<figure class="highlight"><pre><div class="line">java <span class="keyword">version</span> <span class="string">"1.5.0-p2"</span></div><div class="line">Java(TM) <span class="number">2</span> Runtime Environment, Standard Edition (build <span class="number">1.5</span>.<span class="number">0</span>-p2-root_16_jan_2006_15_45)</div><div class="line">Java HotSpot(TM) Client VM (build <span class="number">1.5</span>.<span class="number">0</span>-p2-root_16_jan_2006_15_45, mixed <span class="built_in">mode</span>)</div><div class="line"> </div><div class="line">real    <span class="number">0</span>m3.<span class="number">232</span><span class="keyword">s</span></div><div class="line">user    <span class="number">0</span>m1.<span class="number">679</span><span class="keyword">s</span></div><div class="line">sys     <span class="number">0</span>m1.<span class="number">468</span><span class="keyword">s</span></div><div class="line"> </div><div class="line">java <span class="keyword">version</span> <span class="string">"1.5.0"</span></div><div class="line">Java(TM) <span class="number">2</span> Runtime Environment, Standard Edition (build diablo-<span class="number">1.5</span>.<span class="number">0</span>-b00)</div><div class="line">Java HotSpot(TM) Client VM (build diablo-<span class="number">1.5</span>.<span class="number">0</span>_06-b00, mixed <span class="built_in">mode</span>)</div><div class="line"> </div><div class="line">real    <span class="number">0</span>m0.<span class="number">643</span><span class="keyword">s</span></div><div class="line">user    <span class="number">0</span>m0.<span class="number">556</span><span class="keyword">s</span></div><div class="line">sys     <span class="number">0</span>m0.<span class="number">070</span><span class="keyword">s</span></div></pre></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/java-on-freebsd-2/" data-id="tsddt9rot4e5yem7" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/java-on-freebsd-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/freebsd/">freebsd</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-leverage-ant-xml-nature-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/leverage-ant-xml-nature-2/" class="article-date">
  <time datetime="2006-04-05T22:00:00.000Z" itemprop="datePublished">Apr 6 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/general/">general</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/leverage-ant-xml-nature-2/">Leverage Ant XML nature</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I have been responsible at my current job position of the build of our JavaEE application. We had to build 3 different flavours of the same application. When I decided which build tool to use, I chose Ant since only Maven 1.0 had been released and I disliked writing logic in Jelly. If I had to choose today I’d probably go with Maven 2 because it becomes a standard for industrializing builds on Java and I have just found <a href="http://www.agilocity.com/roller/page/wrast?entry=better_builds_with_maven_2" target="_blank" rel="external">a decent documentation</a> on it…</p>
<p>Our main application is built as an EAR file and I had to support packaging for different application servers. We decided to externalize dependencies (&lt;dependencies&gt; element), compilation (&lt;javalibs&gt; element) and packaging information (&lt;application&gt; element) in an XML description file. Then with the help of a XSL file, we generate dynamically an Ant build file and execute it. We reused Ant &lt;fileset&gt; and &lt;zipfileset&gt; to describe location of files or directories.</p>
<p>In the generation of the EAR, we used sensitive default behaviours to minimize configuration. Here are a few:</p>
<ul>
<li>include dependencies (see  element below) in the EAR unless scope is set to compile and add them to the MANIFEST.MF of each Java module.</li>
<li>add dependencies to the global CLASSPATH (there’s a compilation CLASSPATH for each targeted application server also)</li>
<li>include generated libraries in the EAR unless distinclude is set to false and add them to the MANIFEST.MF of each Java module. If generated libraries are scoped to a given Java EE module they are added in the WEB-INF/lib for a web module or are overlaid with the final EJB jar for EJB modules. Generated global libraries are also added to the global CLASSPATH for compilation.</li>
</ul>
<p>The general strategy was to compile and build global (use by multiple Java EE modules) Jar files with the global Classpath and specific ones with the application server’s CLASSPATH and global CLASSPATH. This way global Jar files were compiled once for all the application servers.</p>
<p>It had some limitations:</p>
<ul>
<li>We only supported Java EE modules of type web or ejb.</li>
<li>Global compiled Jar files could not depend on a specifig Jar files.</li>
<li>Compilation Classpath are not totally isolated for each Web module.</li>
</ul>
<p>I like our approach since with a light XML description file we can now generate an EAR for many application servers. application.xml for the EAR and MANIFEST.MF for each Java modules are generated dynamically. Configuration is far less important than for a Maven’s Pom.xml. Ok we lack transitive dependencies,  web site generations, synchronization with Eclipse but we didn’t really need them.Here’s how a build description file could look like:</p>
<figure class="highlight xml"><pre><div class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></div><div class="line"><span class="doctype">&lt;!DOCTYPE project [</span></div><div class="line">	&lt;!ENTITY LIBDIR "../lib"&gt;</div><div class="line">	&lt;!ENTITY LIBDIR "../src"&gt;</div><div class="line">]&gt;</div><div class="line"><span class="tag">&lt;<span class="title">project</span> <span class="attribute">name</span>=<span class="value">"myapp"</span> <span class="attribute">compilation</span>=<span class="value">"shared"</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">dependencies</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">fileset</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;LIBDIR;/log4j/"</span> <span class="attribute">includes</span>=<span class="value">"log4j-1.2.8.jar"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">fileset</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;LIBDIR;/xml"</span> <span class="attribute">includes</span>=<span class="value">"jdom.jar"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">fileset</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;LIBDIR;/weblogic/8.1"</span> <span class="attribute">includes</span>=<span class="value">"webservices.jar"</span> <span class="attribute">scope</span>=<span class="value">"compile"</span> <span class="attribute">target</span>=<span class="value">"weblogic"</span>/&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="title">dependencies</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">javalibs</span> <span class="attribute">source</span>=<span class="value">"1.4"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">javaproject</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/infra/"</span> <span class="attribute">includes</span>=<span class="value">"core/**"</span> <span class="attribute">name</span>=<span class="value">"infra"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">javaproject</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/ws"</span> <span class="attribute">name</span>=<span class="value">"presentationws"</span> <span class="attribute">module</span>=<span class="value">"presentationweb"</span> <span class="attribute">target</span>=<span class="value">"weblogic"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">javaproject</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/wsaxis"</span> <span class="attribute">name</span>=<span class="value">"presentationwsaxis"</span> <span class="attribute">module</span>=<span class="value">"presentationweb"</span> <span class="attribute">target</span>=<span class="value">"websphere"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">javaproject</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/wsclient"</span> <span class="attribute">name</span>=<span class="value">"wsclient"</span> <span class="attribute">distinclude</span>=<span class="value">"false"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">fileset</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/wsclient/config"</span> <span class="attribute">includes</span>=<span class="value">"client-config.wsdd"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="title">javaproject</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">javaproject</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/Application/WebClient/src"</span> <span class="attribute">name</span>=<span class="value">"wsclient"</span> <span class="attribute">distinclude</span>=<span class="value">"false"</span> <span class="attribute">sign</span>=<span class="value">"true"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">attribute</span> <span class="attribute">name</span>=<span class="value">"Main-Class"</span> <span class="attribute">value</span>=<span class="value">"wsclient.Main"</span>/&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">attribute</span> <span class="attribute">name</span>=<span class="value">"Class-Path"</span> <span class="attribute">value</span>=<span class="value">"commons-httpclient-3.0.jar commons-logging.jar jaxrpc.jar mail.jar saaj.jar wsdl4j.jar"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="title">javaproject</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="title">javalibs</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">application</span> <span class="attribute">target</span>=<span class="value">"weblogic"</span> <span class="attribute">format</span>=<span class="value">"ear"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">zipfileset</span> <span class="attribute">prefix</span>=<span class="value">"sql"</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/db"</span> <span class="attribute">includes</span>=<span class="value">"*.sql"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">module</span> <span class="attribute">name</span>=<span class="value">"presentationws"</span> <span class="attribute">type</span>=<span class="value">"web"</span> <span class="attribute">context</span>=<span class="value">"PresentationWeb"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">zipfileset</span> <span class="attribute">prefix</span>=<span class="value">"WEB-INF"</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/config/PresentationWeb"</span> <span class="attribute">includes</span>=<span class="value">"web.xml,weblogic.xml"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="title">module</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="title">application</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="title">application</span> <span class="attribute">target</span>=<span class="value">"websphere"</span> <span class="attribute">format</span>=<span class="value">"ear"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">zipfileset</span> <span class="attribute">prefix</span>=<span class="value">"sql"</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/db"</span> <span class="attribute">includes</span>=<span class="value">"*.sql"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="title">module</span> <span class="attribute">name</span>=<span class="value">"presentationws"</span> <span class="attribute">type</span>=<span class="value">"web"</span> <span class="attribute">context</span>=<span class="value">"PresentationWeb"</span>&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="title">zipfileset</span> <span class="attribute">prefix</span>=<span class="value">"WEB-INF"</span> <span class="attribute">dir</span>=<span class="value">"&amp;amp;SRCDIR;/config/PresentationWeb"</span> <span class="attribute">includes</span>=<span class="value">"web.xml,ibm*.xml"</span>/&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="title">module</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="title">application</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">project</span>&gt;</span></div></pre></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/leverage-ant-xml-nature-2/" data-id="pb2s2cn1m6xouj5d" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/leverage-ant-xml-nature-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ant/">ant</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-memory-leaks-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/memory-leaks-2/" class="article-date">
  <time datetime="2006-02-27T23:00:00.000Z" itemprop="datePublished">Feb 28 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/memory-leaks-2/">Memory leaks</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> Crazy Bob posted on <a href="http://crazybob.org/2006/02/threadlocal-memory-leak.html" target="_blank" rel="external">ThreadLocal memory leaks</a>.This type of memory leak really annoys me because I see it very often on Java EE servers and developers are not aware of it.The error is mostly annoying in development, testing environmentswhere the Java EE server is not restarted and the applicationsare just redeployed. Therefore, threads (of thread pools) are not recreated and hold references to old application classes.</p>
<p>My advice is <strong>CLEAN YOUR THREADLOCALs</strong></p>
<p>Add a servlet filter, Web frameworkinterceptor or WS handler to set all ThreadLocal variables to null just beforereturning the response to the client. Lower level solutions should be preferred and turn out to be less risky. A dummy implementation (to give an idea) would be a servlet filter:</p>
<figure class="highlight java"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextCleanerFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>{</div><div class="line"> </div><div class="line">	<span class="keyword">private</span> ContextCleaner ctxCleaner;</div><div class="line"> </div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span>(FilterConfig filterConfig) {</div><div class="line">	    <span class="comment">// CtxCleaner instantiated directly boooh !!!</span></div><div class="line">		ctxCleaner = <span class="keyword">new</span> StaticContextCleaner();</div><div class="line">	 }</div><div class="line"> </div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span>(ServletRequest request, ServletResponse response, FilterChain chain) <span class="keyword">throws</span> IOException, ServletException  {</div><div class="line"> </div><div class="line">	    <span class="comment">// Reset ThreadLocals before processing the request</span></div><div class="line">		<span class="keyword">if</span> (ctxCleaner != <span class="keyword">null</span>) ctxCleaner.cleanAll();</div><div class="line">		chain.doFilter(request,response);</div><div class="line">		<span class="comment">// Reset ThreadLocals after processing the request</span></div><div class="line">		<span class="keyword">if</span> (ctxCleaner != <span class="keyword">null</span>) ctxCleaner.cleanAll();</div><div class="line">	}</div><div class="line"> </div><div class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span>() {</div><div class="line"> </div><div class="line">	}</div><div class="line"> </div><div class="line">}</div></pre></figure>

<p>with a ContextCleaner Interface:</p>
<figure class="highlight java"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ContextCleaner</span> </span>{</div><div class="line">   <span class="keyword">boolean</span> cleanAll();</div><div class="line">}</div></pre></figure>

<p>and a dummy implementation:</p>
<figure class="highlight java"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticContextCleaner</span> <span class="keyword">implements</span> <span class="title">ContextCleaner</span> </span>{</div><div class="line"> </div><div class="line">	<span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">cleanAll</span>() {</div><div class="line">	   UserSession.setSessionData(<span class="keyword">null</span>);</div><div class="line">	   <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">	}</div><div class="line"> </div><div class="line">}</div></pre></figure>

<p>Where UserSession has static accessors to handle the ThreadLocal and is used by application code to store objects in a ThreadLocal instance:</p>
<figure class="highlight java"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserSession</span> </span>{</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal m_session= <span class="keyword">new</span> ThreadLocal();</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setSessionData</span>(SessionData sessionData){</div><div class="line">		m_session.set(sessionData);</div><div class="line">	}</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> SessionData <span class="title">getSessionData</span>(){</div><div class="line">		<span class="keyword">return</span> (SessionData)m_session.get();</div><div class="line">	}</div><div class="line">}</div></pre></figure>

<p>The problem with this implementation is that it only works with classes that you controland are aware that they use ThreadLocal variables. Maybe with reflection it’s possible to accessthe current Thread’s Map which stores ThreadLocal objects and set them to null one by one. But it would be highly risky if your application server uses ThreadLocal for its own usage.</p>
<p>For further information on ThreadLocal memory leaks see <a href="http://blog.arendsen.net/?p=18" target="_blank" rel="external">this link</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/memory-leaks-2/" data-id="z63cfe4i89yuzzar" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/memory-leaks-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-2006-02-20-axis-through-apache-httpd-quick-tips-2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2006-02-20-axis-through-apache-httpd-quick-tips-2/" class="article-date">
  <time datetime="2006-02-19T23:00:00.000Z" itemprop="datePublished">Feb 20 2006</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2006-02-20-axis-through-apache-httpd-quick-tips-2/">Axis through Apache HTTPD quick tips</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Here are tips when using Axis Web services through Apache:</p>
<ul>
<li><strong>Gzip</strong> To enable gzip compression use the recommendations of the following blog entry. It consists in using <a href="jakarta.apache.org/commons/httpclient/"> Jakarta commons httpclient</a> and configuring your Axis stub to set gzip compression on. On Apache 2.0.X, mod_deflate module can be used and it’s pretty straightforward to enable gzip compression for input and output streams.<figure class="highlight"><pre><div class="line"><span class="tag">&lt;<span class="title">Location</span> /<span class="attribute">ws</span>&gt;</span>;</div><div class="line"> SetOutputFilter DEFLATE</div><div class="line"> SetInputFilter DEFLATE</div><div class="line"><span class="tag">&lt;/<span class="title">Location</span>&gt;</span></div></pre></figure>

</li>
</ul>
<p>Gzip can be enabled by Mime-type but it didn’t seem to work for me… Enabling gzip compression is only advised when you have “large” messages (100 Kbytes). Benchmark it.</p>
<ul>
<li><strong>Preserve Host</strong><br>When the WSDL is generated via Axis servlet, the <em>Host</em> HTTP header is used to build the URL of WS endpoints in the WSDL. So if you are using mod_proxy to forward HTTP request to a servlet container don’t forget to add this instruction.<figure class="highlight"><pre><div class="line">ProxyPreserveHost <span class="keyword">On</span></div></pre></figure>

</li>
</ul>
<p>Here’s a sample configuration (mod_proxy, mod_proxy_http must be enabled).</p>
<figure class="highlight"><pre><div class="line"><span class="preprocessor"># Configure mod_proxy as a reverse proxy only</span></div><div class="line">ProxyRequests Off</div><div class="line"><span class="preprocessor"># To preserve HOST HTTP/1.1 header</span></div><div class="line">ProxyPreserveHost On</div><div class="line"></div><div class="line">ProxyPass http:<span class="comment">//j2eeserver:80/ws</span></div><div class="line">ProxyPassReverse http:<span class="comment">//j2eeserver:80/ws</span></div><div class="line">SetOutputFilter DEFLATE</div><div class="line">SetInputFilter DEFLATE</div></pre></figure>

<ul>
<li><strong>Dealing with SOAP with attachments</strong>. mod_proxy can be used in front of any servlet container but when the Web containers are clustered it’s better to use the relative Apache module of these containers (mod_jk for Tomcat or mod_wl_20 for Weblogic). The problem is that some modules don’t handle well HTTP chuncked-encoding transfer type. Chunck-encoding is used by default by <a href="http://jakarta.apache.org/commons/httpclient/" target="_blank" rel="external">Jakarta commons httpclient</a> library (see <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html" target="_blank" rel="external"> this RFC description</a> of chunck-encoding). If you do SOAP with attachments with a Mime-Multipart HTTP request, the proxy alters the HTTP headers of the request and Axis doesn’t handle it well. The only solution for me has been to use the latest mod_proxy version.Here’s a sample request:</li>
</ul>
<figure class="highlight"><pre><div class="line">POST /ws/Call HTTP/<span class="number">1.1</span></div><div class="line">Content-Type: multipart/related; <span class="variable">type=</span><span class="string">"text/xml"</span>; <span class="variable">start=</span><span class="string">""</span>; 	<span class="variable">boundary=</span><span class="string">"----=_Part_1_29493424.1136228652812"</span></div><div class="line">SOAPAction: <span class="string">""</span></div><div class="line">User-Agent: Axis/<span class="number">1.3</span></div><div class="line">Host: localhost:<span class="number">81</span></div><div class="line">Transfer-Encoding: chunked</div><div class="line"> </div><div class="line"><span class="number">542</span></div><div class="line"> </div><div class="line"><span class="variable">------=</span>_Part_1_29493424.<span class="number">1136228652812</span></div><div class="line">Content-Type: text/xml; <span class="variable">charset=</span>UTF-<span class="number">8</span></div><div class="line">Content-Transfer-Encoding: binary</div><div class="line">Content-Id: </div><div class="line"> </div><div class="line">me31</div><div class="line"><span class="variable">------=</span>_Part_1_29493424.<span class="number">1136228652812</span></div><div class="line">Content-Type: text/xml</div><div class="line">Content-Transfer-Encoding: binary</div><div class="line">Content-Id: </div><div class="line"> </div><div class="line">permalink: axis-through-apache-httpd-quick-tips-<span class="number">2</span></div><div class="line"><span class="variable">------=</span>_Part_1_29493424.<span class="number">1136228652812</span>--</div></pre></figure>

<p>And here are the altered HTTP headers (behind the Weblogic mod_wl_20 proxy). The Content-length header is missing. The request is not chuncked encoded anymore and it makes Axis unable to find the Mime part of the SOAP-Enveloppe and the Mime part of the attachment.</p>
<figure class="highlight"><pre><div class="line"><span class="request">POST <span class="string">/ws/Call</span> HTTP/1.1</span></div><div class="line"><span class="attribute">Host</span>: <span class="string">localhost:8081</span></div><div class="line"><span class="attribute">Content-Type</span>: <span class="string">multipart/related; type="text/xml"; start=""; 	boundary="----=_Part_1_810652.1136228287250"</span></div><div class="line"><span class="attribute">SOAPAction</span>: <span class="string">""</span></div><div class="line"><span class="attribute">User-Agent</span>: <span class="string">Axis/1.3</span></div><div class="line"><span class="attribute">Max-Forwards</span>: <span class="string">10</span></div><div class="line"><span class="attribute">X-Forwarded-For</span>: <span class="string">192.168.0.1</span></div><div class="line"><span class="attribute">X-Forwarded-Host</span>: <span class="string">localhost:81</span></div><div class="line"><span class="attribute">X-Forwarded-Server</span>: <span class="string">gateway</span></div></pre></figure>

<p><u><strong>About Weblogic module for Apache</strong></u></p>
<p>I wish BEA could opensource their proxy module for Apache. In front of a Weblogic cluster it’s the only module for Apache that can be used because the module keeps a list of alive members of the cluster (by connecting to one of the cluster members). The list of the cluster members is returned to the mod_weblogic module in an encoded form. See the X-Weblogic-Cluster-List header below.</p>
<figure class="highlight"><pre><div class="line"><span class="attribute">X-WebLogic-Cluster-Hash</span>: <span class="string">4VGHN1gZDEo+SVsK2yjMU+4La3w</span></div><div class="line"><span class="attribute">X-Powered-By</span>: <span class="string">Servlet/2.4 JSP/2.0</span></div><div class="line"><span class="attribute">X-WebLogic-Cluster-List</span>: <span class="string">1468479224!-1407317905!7002!-1|648190806!-1407317905!7003!-1</span></div></pre></figure>

<p>I haven’t figured out what the X-Weblogic-Cluster-Hash is and how it’s generated (=&gt; a decompilation of Weblogic classes) should do it but in the X-Weblogic-Cluster-List you can see the inversed IP addresses and port of the cluster members in numerical format. Here ‘s a class to retrieve the IP address from the inversed numerical format.<br>Try: GetIP 1407317905</p>
<figure class="highlight java"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetIP</span> </span>{</div><div class="line"> </div><div class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(String[] args) <span class="keyword">throws</span> Exception {</div><div class="line">    <span class="keyword">long</span> a= Long.parseLong(args[<span class="number">0</span>])  ;</div><div class="line">    <span class="keyword">long</span> b = ~a;</div><div class="line">    StringBuffer ip=<span class="keyword">new</span> StringBuffer();</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">4</span>;i++) {</div><div class="line">       <span class="keyword">long</span> c=b&gt;&gt;(<span class="number">8</span>*(<span class="number">4</span>-i));</div><div class="line">       c = c &amp; <span class="number">255</span>;</div><div class="line">       ip.append(Long.toString(i==<span class="number">4</span>?c+<span class="number">1</span>:c));</div><div class="line">       ip.append(<span class="string">"."</span>);</div><div class="line">    }</div><div class="line">    System.out.println(ip.substring(<span class="number">0</span>,ip.length()-<span class="number">1</span>));</div><div class="line"> </div><div class="line">  }</div><div class="line"> </div><div class="line"> </div><div class="line">}</div></pre></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.dewavrin.info//blog/2006-02-20-axis-through-apache-httpd-quick-tips-2/" data-id="2wzyd3hcc3zass3w" class="article-share-link">Share</a>
      
        <a href="http://www.dewavrin.info//blog/2006-02-20-axis-through-apache-httpd-quick-tips-2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/axis/">axis</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/webservices/">webservices</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/archives/2006/page/2/">2</a><a class="extend next" rel="next" href="/archives/2006/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
<div class="widget-wrap">
   <h3 class="widget-title">tweets</h3>
   <div class="widget">
               <a class="twitter-timeline"  
                   href="https://twitter.com/lucdew" 
                   data-chrome="noheader nofooter noborders transparent"
                   data-tweet-limit="5"
                   data-widget-id="518280804359610368">Tweets by @lucdew</a>
            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
   </div>
</div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ant/" style="font-size: 12.00px;">ant</a><a href="/tags/aop/" style="font-size: 12.00px;">aop</a><a href="/tags/aspectj/" style="font-size: 12.00px;">aspectj</a><a href="/tags/asterisk/" style="font-size: 10.00px;">asterisk</a><a href="/tags/axis/" style="font-size: 10.00px;">axis</a><a href="/tags/blog/" style="font-size: 10.00px;">blog</a><a href="/tags/eclipse/" style="font-size: 12.00px;">eclipse</a><a href="/tags/ejb/" style="font-size: 10.00px;">ejb</a><a href="/tags/firewall/" style="font-size: 16.00px;">firewall</a><a href="/tags/freebsd/" style="font-size: 10.00px;">freebsd</a><a href="/tags/grails/" style="font-size: 10.00px;">grails</a><a href="/tags/groovy/" style="font-size: 12.00px;">groovy</a><a href="/tags/gwt/" style="font-size: 10.00px;">gwt</a><a href="/tags/htmlunit/" style="font-size: 10.00px;">htmlunit</a><a href="/tags/jBPM/" style="font-size: 12.00px;">jBPM</a><a href="/tags/java/" style="font-size: 16.00px;">java</a><a href="/tags/jaxb/" style="font-size: 10.00px;">jaxb</a><a href="/tags/jdbc/" style="font-size: 12.00px;">jdbc</a><a href="/tags/jibx/" style="font-size: 10.00px;">jibx</a><a href="/tags/jms/" style="font-size: 10.00px;">jms</a><a href="/tags/jmx/" style="font-size: 10.00px;">jmx</a><a href="/tags/jpa/" style="font-size: 10.00px;">jpa</a><a href="/tags/jrockit/" style="font-size: 10.00px;">jrockit</a><a href="/tags/jsf/" style="font-size: 10.00px;">jsf</a><a href="/tags/jta/" style="font-size: 10.00px;">jta</a><a href="/tags/ldap/" style="font-size: 10.00px;">ldap</a><a href="/tags/lingo/" style="font-size: 10.00px;">lingo</a><a href="/tags/maven/" style="font-size: 18.00px;">maven</a><a href="/tags/misc/" style="font-size: 18.00px;">misc</a><a href="/tags/osgi/" style="font-size: 10.00px;">osgi</a><a href="/tags/quartz/" style="font-size: 10.00px;">quartz</a><a href="/tags/rails/" style="font-size: 10.00px;">rails</a><a href="/tags/ruby/" style="font-size: 10.00px;">ruby</a><a href="/tags/seam/" style="font-size: 14.00px;">seam</a><a href="/tags/security/" style="font-size: 14.00px;">security</a><a href="/tags/snmp/" style="font-size: 10.00px;">snmp</a><a href="/tags/spring/" style="font-size: 20.00px;">spring</a><a href="/tags/subversion/" style="font-size: 10.00px;">subversion</a><a href="/tags/svn/" style="font-size: 10.00px;">svn</a><a href="/tags/swing/" style="font-size: 10.00px;">swing</a>
    </div>
  </div>

  
    <div class="widget-wrap">
   <h3 class="widget-title">Visitors</h3>
   <div class="widget">
         <a href="http://www2.clustrmaps.com/counter/maps.php?url=http://www.dewavrin.info" id="clustrMapsLink"><img src="http://www2.clustrmaps.com/counter/index2.php?url=http://www.dewavrin.info" style="text-decoration: none; margin-bottom: 1em; border:1px solid;" onmouseover="this.style.textDecoration = 'none'" alt="Locations of visitors to this page" title="Locations of visitors to this page" id="clustrMapsImg" onError="this.onError=null; this.src='http://clustrmaps.com/images/clustrmaps-back-soon.jpg'; document.getElementById('clustrMapsLink').href='http://clustrmaps.com'" /> </a>
   </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/12/">December 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09/">September 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/04/">April 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/03/">March 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/02/">February 2009</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/10/">October 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/09/">September 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/08/">August 2008</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/06/">June 2008</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/05/">May 2008</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/01/">January 2008</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/12/">December 2007</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/11/">November 2007</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/08/">August 2007</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/07/">July 2007</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/06/">June 2007</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/02/">February 2007</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/01/">January 2007</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/12/">December 2006</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/11/">November 2006</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/06/">June 2006</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/05/">May 2006</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/04/">April 2006</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/02/">February 2006</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2006/01/">January 2006</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/12/">December 2005</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/10/">October 2005</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/09/">September 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/08/">August 2005</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/07/">July 2005</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/06/">June 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/05/">May 2005</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/04/">April 2005</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/03/">March 2005</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2005/02/">February 2005</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/12/">December 2004</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/10/">October 2004</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/09/">September 2004</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/08/">August 2004</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/07/">July 2004</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2004/04/">April 2004</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 Luc Dewavrin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'lucdewavrinsblog';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>