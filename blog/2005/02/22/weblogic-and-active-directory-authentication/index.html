
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Weblogic and Active Directory authentication - Luc Dewavrin website</title>
  <meta name="author" content="Luc Dewavrin">

  
  <meta name="description" content="Ok back to more serious Weblogic posts ! Intranet web applications often require to authenticate users with their Windows domain account.Weblogic can &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lucdew.github.com/blog/2005/02/22/weblogic-and-active-directory-authentication">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Luc Dewavrin website" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1239956-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Luc Dewavrin website</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lucdew.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Weblogic and Active Directory Authentication</h1>
    
    
      <p class="meta">
        








  


<time datetime="2005-02-22T00:00:00-05:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2005</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Ok back to more serious <a href='http://edocs.bea.com/wls/docs81/notes/issues.html' title='Known issues'>Weblogic</a> posts !</p>

<p>Intranet web applications often require to authenticate users with their Windows domain account.<a href='http://edocs.bea.com/wls/docs81/notes/issues.html' title='Known issues'>Weblogic</a> can be easily configured to authenticate users through ActiveDirectory Server. <a href='http://edocs.bea.com/wls/docs81/notes/issues.html' title='Known issues'>Weblogic</a> connects to ADS with LDAP (protocol) andtries to bind to the latter with user&#8217;s credentials.</p>

<p>To do so, it&#8217;s pretty easy,just create in your security realm an &#8220;Active Directory Authenticator&#8221;.</p>

<p>You need an account which will have sufficient rights to browse the LDAP&#8217;s Directory InformationTree of ADS to retrieve users and groups. Also you need to configure ADS to authorize LDAPrequests: bind,read and lookups at least on the branches where users and groups reside (this seems to be enabled by default once connected as domain user).</p>

<p>When a user will connect to your Web application and be asked for login/password, the following steps will be performed by the authenticator:</p>

<ul>
<li>Retrieve the Distinguished Name of the user by performing a LDAP request to ADS.The search&#8217;s filter and base DN can be configured in the users tab of the authenticator in the administration console. Also in that tab you can specify theuser&#8217;s attribute name with which the filter to get the user DN will be applied.</li>

<li>Then <a href='http://edocs.bea.com/wls/docs81/notes/issues.html' title='Known issues'>Weblogic</a> binds to ADS with the distinguished name and password given.</li>

<li>If previous step is successful, then it tries to find out to which groups the userbelongs. For this, the filter defined in the membership tab (when configuring the authenticator)is used on each static group. Then in the &#8220;autentication and authorization&#8221; process the other security providers ( authorization and role mapper)are invoked.</li>
</ul>

<p>As you might have noticed, LDAP requests are numerous and it&#8217;s a good idea toenable the cache of LDAP lookups. The cache has a TTL but there&#8217;s no option to reset the cache in the console. The AD authenticator MBean doesn&#8217;t provide a method to reset the cache programmatically.Here&#8217;s a sample configuration extracted from the config.xml file I used for a domain called snakeoil.com.Of course, you might have organised your users and groups differentlyand should adapt your base DN search and filter parameters.</p>
<figure class='code'> <div class='highlight'><table><tr><td class='gutter'><pre class='line-numbers'><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class='nt'>&lt;weblogic.security.providers.authentication.activedirectoryauthenticator</span>
</span><span class='line'><span class='na'>ontrolflag=</span><span class='s'>&quot;OPTIONAL&quot;</span> <span class='na'>credential=</span><span class='s'>&quot;{3DES}8KN5usC0Qp0qSVbgQqtHpg==&quot;</span> <span class='na'>displayname=</span><span class='s'>&quot;SNAKEOIL_ADS&quot;</span>
</span><span class='line'><span class='na'>groupbasedn=</span><span class='s'>&quot;OU=SNAKEOIL_GLOBAL_GROUPS,OU=US,DC=snakeoil,DC=com&quot;</span> <span class='na'>host=</span><span class='s'>&quot;myhost&quot;</span>
</span><span class='line'><span class='na'>name=</span><span class='s'>&quot;Security:Name=myrealmSNAKEOIL_ADS&quot;</span> <span class='na'>principal=</span><span class='s'>&quot;CN=FirstName </span>
</span><span class='line'><span class='s'>LastName,OU=SNAKEOIL_USERS_INTERNALS,OU=SNAKEOIL_USERS,OU=US,DC=snakeoil,DC=com&quot;</span> <span class='na'>realm=</span><span class='s'>&quot;Security:Name=myrealm&quot;</span>
</span><span class='line'><span class='na'>userbasedn=</span><span class='s'>&quot;OU=SNAKEOIL_USERS,OU=US,DC=snakeoil,DC=com&quot;</span>
</span><span class='line'><span class='na'>userfromnamefilter=</span><span class='s'>&quot;(&amp;amp;(sAMAccountName=%u)(objectclass=user))&quot;</span>
</span><span class='line'><span class='na'>usernameattribute=</span><span class='s'>&quot;sAMAccountName&quot;</span><span class='nt'>&gt;</span>
</span><span class='line'><span class='nt'>&lt;/weblogic.security.providers.authentication.activedirectoryauthenticator&gt;</span>
</span></code></pre></td></tr></table></div></figure>
<p>I didn&#8217;t change the membership&#8217;s default parameters (they were fine for my environment)that&#8217;s why they don&#8217;t appear here. The SAMAccountName attribute which contains the Windows login Idis used to find the user DN.</p>

<p><strong>NB1:</strong> By default the JAAS flag of the default authenticator is &#8220;required&#8221; and you should change it to &#8220;Sufficient&#8221; or &#8220;Optional&#8221; otherwise your ADS users will be denied access to your application</p>

<p><strong>NB2:</strong> Their might be a way to transparently authenticate the user once it has an open session on Windows but I haven&#8217;t investigated on that (maybe with Kerberos):Update 12/7/2004: I am answering to my ignorance: yes it exists it is NTLM protocol <a href='http://www.luigidragone.com/networking/ntlm.html'>link</a>But it seems that there&#8217;s no easy way to use it with WLS. It must be better to proxy <a href='http://edocs.bea.com/wls/docs81/notes/issues.html' title='Known issues'>Weblogic</a> with IIS or use SiteMinder.Update 22/02/2005: Since WLS 8.1 sp4 it&#8217;s possible to get automatically authenticated with the Kerberos token obtained once logged in the Windows domain. More explanations on <a href='e-docs.bea.com/wls/docs81/secmanage/sso.html'>edocs.bea.com</a></p>

<p><strong>Links:</strong></p>

<ul>
<li>edocs.bea.com documentation about <a href='http://e-docs.bea.com/wls/docs81/secmanage/providers.html#1172008'>Configuring LDAP authenticators</a></li>

<li>edocs.bea.com documentation about <a href='e-docs.bea.com/wls/docs81/secmanage/sso.html'>Configuring Single Sign-On with Microsoft Clients</a></li>

<li><a href='http://www.microsoft.com/windowsserver2003/technologies/directory/activedirectory/default.mspx'>Microsoft Active Directory Server</a></li>

<li><a href='http://pegacat.com/jxplorer/'>Jxplorer</a> an opensource GUI ldap client written in Java (I discovered itrecently I used to browse LDAP trees with <a href='http://www-unix.mcs.anl.gov/~gawor/ldap/'>LDAP browser</a></li>

<li><a href='http://edocs.bea.com/wls/docs81/notes/issues.html' title='Known issues'>Weblogic</a> Pro Magazine&#8217;s <a href='http://www.ftponline.com/weblogicpro/2004_09/magazine/columns/troubleshootersdiary/default_pf.aspx'>article</a> on debugging LDAP authenticator</li>
</ul></div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Luc Dewavrin</span></span>

      








  


<time datetime="2005-02-22T00:00:00-05:00" pubdate data-updated="true">Feb 22<span>nd</span>, 2005</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/weblogic/'>weblogic</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://lucdew.github.com/blog/2005/02/22/weblogic-and-active-directory-authentication/" data-via="lucdew" data-counturl="http://lucdew.github.com/blog/2005/02/22/weblogic-and-active-directory-authentication/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2004/12/24/presentation-slides-of-weblogic-server-90-2/" title="Previous Post: Presentation slides of Weblogic server 9.0">&laquo; Presentation slides of Weblogic server 9.0</a>
      
      
        <a class="basic-alignment right" href="/blog/2005/03/06/proxying-weblogic-snmp-agent/" title="next Post: Proxying Weblogic SNMP Agent">Proxying Weblogic SNMP Agent &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2009/09/16/last-post/">Last Post</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/05/05/osgi-survey/">OSGI survey</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/04/27/mimic-facelet-layouts-in-grails/">Mimic facelet layouts in grails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/04/20/acquisition-de-sun-par-oracle/">Acquisition de Sun par Oracle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2009/03/30/seam-usage-in-production/">Seam usage in production</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("lucdew", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/lucdew" class="twitter-follow-button" data-show-count="false">Follow @lucdew</a>
  
</section>




<section><h1>Tags</h1><p><a href="/tags/ant" title="Postings tagged ant" style="font-size: 11.0px; line-height:11.0px">ant</a> <a href="/tags/aop" title="Postings tagged aop" style="font-size: 11.0px; line-height:11.0px">aop</a> <a href="/tags/aspectj" title="Postings tagged aspectj" style="font-size: 11.0px; line-height:11.0px">aspectj</a> <a href="/tags/asterisk" title="Postings tagged asterisk" style="font-size: 10.5px; line-height:10.5px">asterisk</a> <a href="/tags/axis" title="Postings tagged axis" style="font-size: 10.5px; line-height:10.5px">axis</a> <a href="/tags/blog" title="Postings tagged blog" style="font-size: 10.5px; line-height:10.5px">blog</a> <a href="/tags/eclipse" title="Postings tagged eclipse" style="font-size: 11.0px; line-height:11.0px">eclipse</a> <a href="/tags/ejb" title="Postings tagged ejb" style="font-size: 10.5px; line-height:10.5px">ejb</a> <a href="/tags/firewall" title="Postings tagged firewall" style="font-size: 12.5px; line-height:12.5px">firewall</a> <a href="/tags/freebsd" title="Postings tagged freebsd" style="font-size: 10.5px; line-height:10.5px">freebsd</a> <a href="/tags/grails" title="Postings tagged grails" style="font-size: 10.5px; line-height:10.5px">grails</a> <a href="/tags/groovy" title="Postings tagged groovy" style="font-size: 10.5px; line-height:10.5px">groovy</a> <a href="/tags/gwt" title="Postings tagged gwt" style="font-size: 10.5px; line-height:10.5px">gwt</a> <a href="/tags/htmlunit" title="Postings tagged htmlunit" style="font-size: 10.5px; line-height:10.5px">htmlunit</a> <a href="/tags/jBPM" title="Postings tagged jBPM" style="font-size: 11.0px; line-height:11.0px">jBPM</a> <a href="/tags/java" title="Postings tagged java" style="font-size: 12.5px; line-height:12.5px">java</a> <a href="/tags/jaxb" title="Postings tagged jaxb" style="font-size: 10.5px; line-height:10.5px">jaxb</a> <a href="/tags/jdbc" title="Postings tagged jdbc" style="font-size: 11.0px; line-height:11.0px">jdbc</a> <a href="/tags/jibx" title="Postings tagged jibx" style="font-size: 10.5px; line-height:10.5px">jibx</a> <a href="/tags/jms" title="Postings tagged jms" style="font-size: 10.5px; line-height:10.5px">jms</a> <a href="/tags/jmx" title="Postings tagged jmx" style="font-size: 10.5px; line-height:10.5px">jmx</a> <a href="/tags/jpa" title="Postings tagged jpa" style="font-size: 10.5px; line-height:10.5px">jpa</a> <a href="/tags/jrockit" title="Postings tagged jrockit" style="font-size: 10.5px; line-height:10.5px">jrockit</a> <a href="/tags/jsf" title="Postings tagged jsf" style="font-size: 10.5px; line-height:10.5px">jsf</a> <a href="/tags/jta" title="Postings tagged jta" style="font-size: 10.5px; line-height:10.5px">jta</a> <a href="/tags/ldap" title="Postings tagged ldap" style="font-size: 10.5px; line-height:10.5px">ldap</a> <a href="/tags/lingo" title="Postings tagged lingo" style="font-size: 10.5px; line-height:10.5px">lingo</a> <a href="/tags/maven" title="Postings tagged maven" style="font-size: 13.0px; line-height:13.0px">maven</a> <a href="/tags/misc" title="Postings tagged misc" style="font-size: 13.0px; line-height:13.0px">misc</a> <a href="/tags/osgi" title="Postings tagged osgi" style="font-size: 10.5px; line-height:10.5px">osgi</a> <a href="/tags/quartz" title="Postings tagged quartz" style="font-size: 10.5px; line-height:10.5px">quartz</a> <a href="/tags/rails" title="Postings tagged rails" style="font-size: 10.5px; line-height:10.5px">rails</a> <a href="/tags/ruby" title="Postings tagged ruby" style="font-size: 10.5px; line-height:10.5px">ruby</a> <a href="/tags/seam" title="Postings tagged seam" style="font-size: 12.0px; line-height:12.0px">seam</a> <a href="/tags/security" title="Postings tagged security" style="font-size: 12.0px; line-height:12.0px">security</a> <a href="/tags/snmp" title="Postings tagged snmp" style="font-size: 10.5px; line-height:10.5px">snmp</a> <a href="/tags/spring" title="Postings tagged spring" style="font-size: 14.5px; line-height:14.5px">spring</a> <a href="/tags/subversion" title="Postings tagged subversion" style="font-size: 10.5px; line-height:10.5px">subversion</a> <a href="/tags/swing" title="Postings tagged swing" style="font-size: 10.5px; line-height:10.5px">swing</a> <a href="/tags/tomcat" title="Postings tagged tomcat" style="font-size: 11.0px; line-height:11.0px">tomcat</a> <a href="/tags/tuning" title="Postings tagged tuning" style="font-size: 10.5px; line-height:10.5px">tuning</a> <a href="/tags/voip" title="Postings tagged voip" style="font-size: 10.5px; line-height:10.5px">voip</a> <a href="/tags/vpn" title="Postings tagged vpn" style="font-size: 10.5px; line-height:10.5px">vpn</a> <a href="/tags/web2.0-ria" title="Postings tagged web2.0-ria" style="font-size: 10.5px; line-height:10.5px">web2.0-ria</a> <a href="/tags/weblogic" title="Postings tagged weblogic" style="font-size: 20.0px; line-height:20.0px">weblogic</a> <a href="/tags/webservices" title="Postings tagged webservices" style="font-size: 10.5px; line-height:10.5px">webservices</a> <a href="/tags/websphere" title="Postings tagged websphere" style="font-size: 10.5px; line-height:10.5px">websphere</a> <a href="/tags/xfire" title="Postings tagged xfire" style="font-size: 10.5px; line-height:10.5px">xfire</a> <a href="/tags/xpath" title="Postings tagged xpath" style="font-size: 10.5px; line-height:10.5px">xpath</a> </p></section>
<section>
  <h1>Visitors</h1>
  <p><a href="http://www2.clustrmaps.com/counter/maps.php?url=http://www.dewavrin.info" id="clustrMapsLink"><img src="http://www2.clustrmaps.com/counter/index2.php?url=http://www.dewavrin.info" style="text-decoration: none; margin-bottom: 1em; border:1px solid;" onmouseover="this.style.textDecoration = 'none'" alt="Locations of visitors to this page" title="Locations of visitors to this page" id="clustrMapsImg" onError="this.onError=null; this.src='http://clustrmaps.com/images/clustrmaps-back-soon.jpg'; document.getElementById('clustrMapsLink').href='http://clustrmaps.com'" /> </a>
</p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Luc Dewavrin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'lucdewavrinsblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
